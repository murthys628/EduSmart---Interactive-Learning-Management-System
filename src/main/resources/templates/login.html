<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title> Edusmart Login </title>
<style>
body {
    font-family: Arial, sans-serif;
    background: url('/images/login.jpg') no-repeat center center fixed;
    background-size: cover;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
}

.container {
    background: rgba(255, 255, 255, 0.9);
    padding: 40px 60px;
    border-radius: 15px;
    text-align: center;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    width: 350px;
}

h2 {
    margin-bottom: 20px;
    color: #333;
}

input {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 1em;
    outline: none;
}

input:focus {
    border: 1px solid #4CAF50;
}

button {
    width: 100%;
    padding: 10px;
    margin-top: 12px;
    border: none;
    border-radius: 6px;
    background: #4CAF50;
    color: white;
    font-size: 1em;
    cursor: pointer;
}

button:hover {
    background: #45a049;
}

p.message {
    color: green;
    font-weight: bold;
}

p.error {
    color: red;
    font-weight: bold;
}

.links {
    margin-top: 15px;
}
</style>
</head>
<body>
<div class="container">
    <h2>Login</h2>

    <!-- Show error or success messages -->
    <p class="error" th:if="${param.error}" th:text="'Invalid username or password!'"></p>
    <p class="message" th:if="${param.logout}" th:text="'Logged out successfully!'"></p>

    <form th:action="@{/perform_login}" method="post">
        <input type="text" name="username" placeholder="Username" required />
        
        <div class="password-group">
            <input type="password" name="password" id="passwordInput" placeholder="Password" required />
            <button type="button" class="password-toggle-btn" 
                    onclick="togglePasswordVisibility('passwordInput')" 
                    aria-label="Toggle password visibility">
                <!-- SVG Eye Icon -->
                <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye">
                    <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                    <circle cx="12" cy="12" r="3"></circle>
                </svg>
            </button>
        </div>
        
        <button type="submit">Login</button>
    </form>

    <div class="links">
        <a th:href="@{/home}">üè† Back to Home</a> | 
        <a th:href="@{/users/signup}">Don‚Äôt have an account? Signup</a>
    </div>
</div>

<script>
    /**
     * Toggles the type of the target input field between 'password' and 'text'.
     * Updates the eye icon to reflect the visibility state (using simple stroke change).
     */
    function togglePasswordVisibility(fieldId) {
        const passwordInput = document.getElementById(fieldId);
        const iconContainer = passwordInput.nextElementSibling; // The button containing the SVG
        const svg = iconContainer.querySelector('svg');

        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            // Simple visual change to indicate visibility (like a slash)
            svg.setAttribute('stroke-dasharray', '5 5'); 
            iconContainer.setAttribute('aria-label', 'Hide password');
        } else {
            passwordInput.type = 'password';
            // Change back to 'eye' style
            svg.removeAttribute('stroke-dasharray');
            iconContainer.setAttribute('aria-label', 'Show password');
        }
    }
</script>

</body>
</html>